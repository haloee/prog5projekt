<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>New Listing</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>
<h1>New Listing</h1>

<form th:action="@{/listings}" method="post" th:object="${dto}" enctype="multipart/form-data">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

    <div>
        <label>Book</label>
        <select th:field="*{bookId}" required>
            <option value="">-- select --</option>
            <option th:each="b : ${books}"
                    th:value="${b.id}"
                    th:text="${b.title}"
                    th:selected="${b.id} == *{bookId}">
                Book
            </option>
        </select>
        <div class="error" th:if="${#fields.hasErrors('bookId')}" th:errors="*{bookId}"></div>
    </div>

    <div>
        <label>Condition</label>
        <select th:field="*{condition}">
            <option th:value="NEW">NEW</option>
            <option th:value="GOOD">GOOD</option>
            <option th:value="USED">USED</option>
        </select>
    </div>

    <div>
        <label>Type</label>
        <select th:field="*{type}">
            <option th:value="SELL">SELL</option>
            <option th:value="TRADE">TRADE</option>
            <option th:value="GIVEAWAY">GIVEAWAY</option>
        </select>
    </div>

    <div>
        <label>Price (HUF)</label>
        <input type="number" min="0" th:field="*{priceHuf}"/>
        <div class="error" th:if="${#fields.hasErrors('priceHuf')}" th:errors="*{priceHuf}"></div>
    </div>

    <div>
        <label>Note</label>
        <textarea th:field="*{note}" rows="3"></textarea>
        <div class="error" th:if="${#fields.hasErrors('note')}" th:errors="*{note}"></div>
    </div>

    <div>
        <label>Image (optional)</label>
        <input type="file" name="image" accept="image/*"/>
    </div>

    <p class="actions">
        <button type="submit">Create</button>
        <a th:href="@{/}">Cancel</a>
    </p>
</form>
</body>
</html>
