<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"><title>New Listing</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>
<h1>New Listing</h1>

<form class="form" th:action="@{/listings}" th:object="${dto}" method="post">
    <!-- CSRF -->
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

    <label>Owner
        <select th:field="*{ownerId}">
            <option value="" disabled selected>-- select user --</option>
            <option th:each="u: ${users}" th:value="${u.id}"
                    th:text="${u.displayName + ' (' + u.email + ')'}"></option>
        </select>
        <div class="error" th:if="${#fields.hasErrors('ownerId')}" th:errors="*{ownerId}"></div>
    </label>

    <label>Book
        <select th:field="*{bookId}">
            <option value="" disabled selected>-- select book --</option>
            <option th:each="b: ${books}" th:value="${b.id}"
                    th:text="${b.title + ' â€“ ' + b.author}"></option>
        </select>
        <div class="error" th:if="${#fields.hasErrors('bookId')}" th:errors="*{bookId}"></div>
    </label>

    <label>Condition
        <select th:field="*{condition}">
            <option value="" disabled selected>-- select condition --</option>
            <option value="NEW">NEW</option>
            <option value="LIKE_NEW">LIKE_NEW</option>
            <option value="GOOD">GOOD</option>
            <option value="USED">USED</option>
        </select>
        <div class="error" th:if="${#fields.hasErrors('condition')}" th:errors="*{condition}"></div>
    </label>

    <label>Type
        <select th:field="*{type}">
            <option value="" disabled selected>-- select type --</option>
            <option value="EXCHANGE">EXCHANGE</option>
            <option value="GIVEAWAY">GIVEAWAY</option>
            <option value="SELL">SELL</option>
        </select>
        <div class="error" th:if="${#fields.hasErrors('type')}" th:errors="*{type}"></div>
    </label>

    <label>Price (HUF)
        <input type="number" th:field="*{priceHuf}">
        <div class="error" th:if="${#fields.hasErrors('priceHuf')}" th:errors="*{priceHuf}"></div>
    </label>

    <label>Note
        <textarea rows="4" th:field="*{note}"></textarea>
        <div class="error" th:if="${#fields.hasErrors('note')}" th:errors="*{note}"></div>
    </label>

    <p>
        <button type="submit">Save</button>
        <a th:href="@{/}">Cancel</a>
    </p>
</form>
</body>
</html>
